<style>
  .btn-group-no-margin {
    margin: 0px !important;
  }
</style>
<div class="row">

  <!--Filter-->
  <div class="input-group col-md-12 filter">
    <span class="input-group-addon">
        <i class="fa fa-search fa-2x"></i>
    </span>

    <input class="form-control filter-input" type="text" ng-keydown="itemsCtrl.filterChanged()" ng-model="itemsCtrl.filterText" placeholder="filter...">

    <span class="input-group-addon btn btn-default" ng-click="itemsCtrl.clearFilter()" ng-hide="itemsCtrl.filter.length == 0">
        <i class="fa fa-remove fa-2x"></i>
    </span>
  </div>

  <!--AngularJS SPA CRUD table-->
  <form name="tableForm">
    <table class="table table-condensed table-hover table-striped" ng-hide="itemsCtrl.loading">
      <!-- Header-->
      <tr class="panel-title">
          <!--Buttons column-->
          <th style="width: 100px;">
              <!--Add + Cancel-->
              <div class="btn-toolbar"><i class="btn fa fa-plus fa-2x" ng-click="itemsCtrl.toggleAddMode()" title="Add" ng-hide="itemsCtrl.addMode"></i></div>
              <div class="btn-toolbar"><i class="btn fa fa-minus fa-2x" ng-click="itemsCtrl.toggleAddMode()" title="Cancel" ng-show="itemsCtrl.addMode"></i></div>
          </th>

          <!-- Content headers-->
          <th ng-repeat="column in itemsCtrl.columnsDefinition"
              ng-hide="column.hidden"
              style="vertical-align:middle; cursor: pointer">
              <div ng-click="itemsCtrl.setOrderByColumn(column.binding)">
                  {{column.header}}
                  <i class="fa"
                     ng-class="{'fa fa-arrow-up fa-2x': !itemsCtrl.orderByReverse, 'fa fa-arrow-down fa-2x': itemsCtrl.orderByReverse}"
                     ng-show="itemsCtrl.orderByColumn == column.binding"></i>
              </div>
          </th>
      </tr>

      <!--Row with the new item-->
      <tr ng-if="itemsCtrl.addMode" style="background: rgb(251, 244, 222)">

          <!--New item: Buttons column-->
          <td>
              <div class="btn-toolbar">
                  <!--Create + Cancel-->
                  <div class="btn-group btn-group-no-margin">
                      <i class="btn fa fa-floppy-o fa-2x" ng-click="itemsCtrl.createItem(itemsCtrl.newItem)" title="Create"
                         ng-disabled="itemsCtrl.newItem.hasErrors"></i>
                      <i class="btn fa fa-remove fa-2x" ng-click="itemsCtrl.toggleAddMode()" title="Cancel"></i>
                  </div>
              </div>
          </td>

          <!-- New item: Content columns-->
          <td ng-repeat="column in itemsCtrl.columnsDefinition" ng-hide="column.hidden" style="vertical-align:middle">
              
            <!--Show cell editor control for each column-->
            <div cell-editor 
              item="itemsCtrl.newItem"
              column="column"
              key-up-event="itemsCtrl.createModeKeyUp">
            </div>
          </td>
      </tr>

      <!--Content-->
      <tr dir-paginate="knownItem in itemsCtrl.allItems | orderBy:itemsCtrl.orderByColumn: itemsCtrl.orderByReverse | filter:itemsCtrl.filter | itemsPerPage: pageSize" total-items="totalItems">

        <!--Buttons column-->
        <td class="col-xs-1">
          <!--Edit + Delete-->
          <div class="btn-toolbar" ng-show="knownItem.editMode == null || knownItem.editMode == false">
            <div class="btn-group btn-group-no-margin">
              <i class="btn fa fa-edit fa-2x" ng-click="itemsCtrl.toggleEditMode(knownItem)" title="Edit"></i>
              <i class="btn fa fa-trash fa-2x" ng-click="itemsCtrl.deleteItem(knownItem)" title="Delete" data-toggle="modal"></i>
            </div>
          </div>

          <!--Save + Cancel-->
          <div class="btn-toolbar" ng-show="knownItem.editMode">
            <div class="btn-group btn-group-no-margin">
              <i class="btn fa fa-floppy-o fa-2x" ng-click="itemsCtrl.updateItem(knownItem)" title="Save"
                 ng-disabled="knownItem.hasErrors"></i>
              <i class="btn fa fa-remove fa-2x" ng-click="itemsCtrl.toggleEditMode(knownItem)" title="Cancel"></i>
            </div>
          </div>
        </td>

        <!-- Content columns-->
        <td ng-repeat="column in itemsCtrl.columnsDefinition" ng-hide="column.hidden" style="vertical-align:middle" class="col-xs-2x">

          <!--Read mode-->
          <span ng-show="knownItem.editMode == null || knownItem.editMode == false" ng-dblclick="itemsCtrl.toggleEditMode(knownItem)">
            <!-- Each item as an array property / value, header is the value that this column display-->
            <span ng-switch="column.type">
              <!-- Text -->
              <span ng-switch-default>{{knownItem[column.binding]}}</span>
              <!-- Date -->
              <span ng-switch-when="date">{{knownItem[column.binding]| date:'fullDate'}}</span>
            </span>
          </span>

          <!--Show cell editor control for each column-->
          <div ng-show="knownItem.editMode"
            cell-editor
            item="knownItem"
            column="column"
            key-up-event="itemsCtrl.updateModeKeyUp">
            <!--updateModeKeyUp has no parenthesis to pass parameters-->
          </div>

        </td>

      </tr>

    </table>

  </form>

  <!--Loading indicator-->
  <img src="<%= asset_path('acts_as_talented/ajax-loader.gif') %>" ng-show="itemsCtrl.loading" class="center-block" title="Loading..." />

  <dir-pagination-controls on-page-change="pageChanged(newPageNumber)"></dir-pagination-controls>
</div>